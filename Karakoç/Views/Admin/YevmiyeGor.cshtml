@model List<Karakoç.Models.Yevmiyeler>
@{
    ViewData["Title"] = "YevmiyeGor";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
    var günSayısı = DateTime.DaysInMonth(DateTime.Now.Year, DateTime.Now.Month); // O ayın gün sayısı
}

<main class="main users chart-page" id="skip-target">
    <div class="container">
        <h2 class="main-title">Çalışanların Yevmiye Bilgisi</h2>

        <div class="users-table table-wrapper">
            <div class="table-container">
                <table class="table table-primary">
                    <thead>
                        <tr>
                            <th>Çalışan</th>
                            @for (int i = 1; i <= günSayısı; i++)
                            {
                                <th>@i</th> <!-- Günler -->
                            }
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var calisanGroup in Model.GroupBy(y => new { y.CalisanId, y.Calisan.Name, y.Calisan.Surname }))
                        {
                            <tr>
                                <td>@calisanGroup.Key.Name @calisanGroup.Key.Surname</td>
                                @for (int i = 1; i <= günSayısı; i++)
                                {
                                    var tarih = new DateTime(DateTime.Now.Year, DateTime.Now.Month, i);
                                    var yevmiye = calisanGroup.FirstOrDefault(y => y.Tarih == tarih.Date);
                                    var isWorked = yevmiye.IsWorked ?? false;


                                    <td style="background-color: @(isWorked ? "blue" : "transparent")"></td> <!-- Mavi arka plan -->
                                }
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</main>
